upstream vedicmath_ws {
  server 127.0.0.1:10001; 
}

server {
  listen 80;
  listen [::]:80;
  server_name www.sachin.rudraraju.xyz www.xyzprogramming.solutions;
  include /etc/nginx/snippets/letsencrypt.conf;

  root /home/sachin/sachin.rudraraju.xyz;
  index index.html;

  location / {
    return 301 https://www.xyzprogramming.solutions$request_uri;
  }
}

server {
  listen 80 default_server;
  listen [::]:80 default_server;
  server_name sachin.rudraraju.xyz xyzprogramming.solutions;
  include /etc/nginx/snippets/letsencrypt.conf;

  location / {
    return 301 https://xyzprogramming.solutions$request_uri;
  }
}

server {
  listen 443 ssl http2;
  listen [::]:443 ssl http2;
  server_name www.sachin.rudraraju.xyz www.xyzprogramming.solutions;
  ssl_certificate /etc/letsencrypt/live/xyzprogramming.solutions/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/xyzprogramming.solutions/privkey.pem;
  ssl_trusted_certificate /etc/letsencrypt/live/xyzprogramming.solutions/fullchain.pem;
  include /etc/nginx/snippets/ssl.conf;
  
  location / {
    return 301 https://xyzprogramming.solutions$request_uri;
  }
}

server {
  listen 443 ssl http2 default_server;
  listen [::]:443 ssl http2 default_server;
  server_name sachin.rudraraju.xyz xyzprogramming.solutions;
  ssl_certificate /etc/letsencrypt/live/xyzprogramming.solutions/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/xyzprogramming.solutions/privkey.pem;
  ssl_trusted_certificate /etc/letsencrypt/live/xyzprogramming.solutions/fullchain.pem;
  include /etc/nginx/snippets/ssl.conf;

  root /home/sachin/sachin.rudraraju.xyz;
  index index.html;

  location / {
      index index.html index.htm;
      try_files $uri.html $uri $uri/ @redirect;
  }

  location /vedicmath/client {
      alias /home/sachin/vedicmath/frontend/www;
      index index.html index.htm;
      try_files $uri.html $uri $uri/ /index.html =404;
  }
  location /vedicmath/ws {
      proxy_pass http://vedicmath_ws;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection $connection_upgrade;
  } 
}

server {
  listen 80;
  listen [::]:80;
  server_name labqc.xyzprogramming.solutions;
  include /etc/nginx/snippets/letsencrypt.conf;

  location / {
    return 301 https://labqc.xyzprogramming.solutions$request_uri;
  }
}

server {
  listen 443 ssl http2;
  listen [::]:443 ssl http2;
  server_name labqc.xyzprogramming.solutions;
  ssl_certificate /etc/letsencrypt/live/xyzprogramming.solutions/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/xyzprogramming.solutions/privkey.pem;
  ssl_trusted_certificate /etc/letsencrypt/live/xyzprogramming.solutions/fullchain.pem;
  include /etc/nginx/snippets/ssl.conf;
  
  location / {
    root /home/sachin/labqc/www;
    index index.html index.htm;
    try_files $uri.html $uri $uri/ =404;
  }

  location ~ /(api|static|admin) {
    proxy_pass http://127.0.0.1:9000;
  }
}

# -----------------------------------------------------------

server {
    listen 80;
    server_name rudraraju.xyz www.rudraraju.xyz;

    location / {
        root /home/sachin/sachin.rudraraju.xyz;
        index index.html index.htm;
        try_files $uri.html $uri $uri/ @redirect;
    }

    location @redirect {
        return 301 http://sachin.rudraraju.xyz;
    }
}
server {
    listen 80;
    server_name crcfbt.org www.crcfbt.org;

    location / {
        root /home/sachin/sachin.rudraraju.xyz;
        index index.html index.htm;
        try_files $uri.html $uri $uri/ @redirect;
    }

    location @redirect {
        return 301 http://sachin.rudraraju.xyz;
    }
}

server {
    listen 80;
    server_name grin.sachin.rudraraju.xyz www.grin.sachin.rudraraju.xyz;
    index  index.html index.htm;

    location / {
        root /home/sachin/grinadmin/frontend/www;
        try_files $uri.html $uri $uri/ /index.html =404;
    }

    location /api {
      client_max_body_size 5M;
      rewrite ^/api/(.*) /$1 break;
      proxy_pass http://127.0.0.1:7777;
    }
}

server {
    listen 80;
    server_name analyzer.xyzprogramming.solutions www.analyzer.xyzprogramming.solutions;

    location / {
        root /home/sachin/inxite/frontend/www;
        index index.html index.htm;
        try_files $uri.html $uri $uri/ =404;
    }
    location /api {
      rewrite ^/api/(.*) /$1 break;
      proxy_pass http://127.0.0.1:7878;
    }
}

server {
    listen 80;
    server_name bdw.sachin.rudraraju.xyz;
      
    location / {
      root /home/sachin/bdw/www;
      try_files $uri $uri.html $uri/ =404;
    }

    location /api {
      client_max_body_size 5M;
      proxy_pass http://127.0.0.1:7888/;
    }
    
    location /admin {
      alias /home/sachin/bdw/www/admin;
      try_files $uri $uri.html $uri/ =404;

      auth_basic "Restricted Content";
      auth_basic_user_file /home/sachin/bdw/.htpasswd;
    }
}

